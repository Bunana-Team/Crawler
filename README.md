# LOJ 题目批量爬取工具 - 开发文档

## 一、工具简介
你好！这是一个基于 **Go 语言** 开发的 LOJ (LuoGu Online Judge) 题目批量爬取工具，核心用途是自动化收集 LOJ 平台上指定范围的编程题目及相关资源，并整理为标准化的 YAML 配置文件，方便二次开发或离线查阅使用。

简单来说，它能帮你一键下载：
- 题目描述、输入输出格式、样例数据、测试用例
- 附加文件、题目图片等所有相关资源
- 并按统一格式归档

---

## 二、核心功能
1. **批量爬取题目**  
   支持指定题目 ID 范围（默认 1-533），自动抓取每道题的完整信息

2. **资源全面下载**  
   - **文本类**：题目标题、描述、输入输出格式、样例、提示、评分标准  
   - **文件类**：测试数据（TestData）、附加文件（AdditionalFile）  
   - **媒体类**：题目中的图片资源（自动去重、本地归档）

3. **标准化输出**  
   所有题目信息汇总为 YAML 配置文件，结构清晰可直接解析

4. **自动归档整理**  
   文件按类型分类存储，支持一键压缩为 ZIP 包

5. **健壮性设计**  
   - 网络超时处理  
   - 文件去重  
   - 路径自动创建  
   - 错误友好提示

---

## 三、环境准备

### 1. 前置依赖
- **Go 环境**：需安装 Go 1.18+（推荐 1.20+）  
  下载地址：[https://golang.org/dl/](https://golang.org/dl/)
- **网络权限**：能访问 LOJ 接口（https://api.loj.ac）  
  若国内访问失败需配置代理
- **权限要求**：本地输出目录需有读写权限（默认 `E:\gopachong\output25`）

### 2. 依赖库说明
工具使用 **Go 标准库开发**，无第三方依赖，无需额外执行 `go get` 安装包。

---

## 四、使用步骤

### 1. 配置工具（关键步骤）
打开代码文件，修改顶部「配置」区域的参数（根据自身需求调整）：

```go
// ------------------ 配置 ----------------------
const Token = "Bearer -------"  // 必须替换为你的 LOJ 访问令牌

const (
    StartID      = 1          // 起始题目 ID（从 1 开始）
    EndID        = 533        // 结束题目 ID（最大可根据 LOJ 最新题目调整）
    OutputFolder = `E:\gopachong\output25`  // 输出目录（可自定义路径）
    YAMLPath     = OutputFolder + `\problems_version_1.0.yaml`  // YAML 输出路径
    BaseAPI      = "https://api.loj.ac/api"  // LOJ API 基础地址（无需修改）
    AssetsFolder = OutputFolder + `\assets`  // 图片资源存储目录（无需修改）
)
## 四、注意事项

====================== 注意事项 ======================

1. 常见错误及解决：
   - 无法访问 LOJ 接口：
     原因：网络阻塞
     解决：配置代理或使用国内网络加速
   - Token 无效或过期（状态码 401）：
     解决：重新获取 Authorization Token
   - 输出目录权限不足：
     原因：OutputFolder 无写入权限
     解决：修改为有权限的路径

2. 使用建议：
   - 大量题目（500+）建议分批爬取
   - 图片资源多时，耐心等待终端输出“全部完成”
   - 若只需文本信息，可注释 downloadAllFiles 和 downloadAllImages 相关调用

3. 合规说明：
   - 仅用于个人学习和研究
   - 遵守 LOJ 版权协议，避免对服务器造成压力

4. 其他注意事项：
   - 输出目录需有足够磁盘空间
   - 网络中断可重新执行，重复文件会自动去重
   - Windows 用户路径建议使用 ASCII 字符，避免路径解析错误
=======================================================
